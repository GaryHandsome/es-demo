<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    <table id="tbl" border="1" width="80%" align="center">
        <tr>
            <th>姓名</th>
            <th>性别</th>
            <th>年龄</th>
            <th>体重</th>
        </tr>

    </table>

  <script>
    /**
     * 模拟 $.post()方法
     * url:请求地址
     * data：传递过来的数据
     * fun：回调函数
     */
    function jqueryPost(url,data,fun) {
        // 1）验证url地址必须以http或https开始,否则抛出异常 - 正则表达式
        // https://www.baidu.com
        let reg = /^(http)|^(https).{5,}/ ;
        if(!reg.test(url)) {
            // 抛出异常后，程序马上终止，不再继续往下执行
            throw {
              name:'URLError',
              message:'错误的URL地址，地址必须以http开始或以https开始'
            }
        }
        // 2）定义三条记录，信息有：姓名,性别,年龄,体重
        let users = [
            {name:'zs',sex:'男',age:18,weight:100},
            {name:'ls',sex:'女',age:28,weight:200},
            {name:'ww',sex:'男',age:38,weight:300}
        ] ;
        // 3）获取第二个参数的体重，实现体重相加 - {weight:10} - data = {weight:10}
        for(let i=0;i<users.length;i++) {
            users[i].weight = users[i].weight + data.weight;
        }
        // 4）在回调函数中，使用表格显示三条记录的数据 - 把函数的某个责任或功能分离出去,模拟实现多态
        // 执行回调函数，但是回调是怎么样的？不知道 - 因此，可以通过传递不同的回调函数可以有不同的解决方案（模拟多态）
        fun(users) ;
    }
    // 使用方法一：非匿名回调函数（不建议）
    // function printToTable(users) {
    //     // ....
    // }
    // jqueryPost("https://www.baidu.com",{weight:20},printToTable) ;

    // 方法二：匿名回调函数 - $.post("add.od",{},function(){})
    // 方案一（数据在控制台输出）
    jqueryPost("https://www.baidu.com",{weight:20},function( users ){
        console.log(users)
    }) ;

    // 方案二（数据在页面中，以表格的方式输出） - 原生 JavaScript DOM操作
    jqueryPost("https://www.baidu.com",{weight:20},function( users ){
        // 获取要操作的 table 节点
        let table = document.querySelector("#tbl") ;

        // 循环遍历 users
        for(let i=0;i<users.length;i++) {
            // 创建 tr 节点
            let tr = document.createElement("tr");

            // 创建各个 td 节点，并设置相关的数据
            let td1 = document.createElement("td");
            td1.innerText = users[i].name;

            let td2 = document.createElement("td");
            td2.innerText = users[i].sex;

            let td3 = document.createElement("td");
            td3.innerText = users[i].age;

            let td4 = document.createElement("td");
            td4.innerText = users[i].weight;

            // 把各个 td 节点，添加到 tr 节点中
            tr.appendChild(td1);
            tr.appendChild(td2);
            tr.appendChild(td3);
            tr.appendChild(td4);

            // 把各个 tr 节点，添加到 table节点中
            table.appendChild(tr) ;
        }
    }) ;


  </script>
</body>
</html>